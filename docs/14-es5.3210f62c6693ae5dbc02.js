(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{trxj:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class o{}var i=e("pMnS"),r=e("MKJQ"),a=e("sZkV"),u=e("SVse"),s=e("mrSG"),c=e("I6FA");class h{constructor(l,n,e,t,o){this.actionSheetController=l,this.alertController=n,this.router=e,this.activatedRoute=t,this.klaskSvc=o,this.currentTourneyId="",this.scores=[],this.isGameOver=!1,this.forfeitted=!1,this.players=[this.klaskSvc.getPlayerOne(),this.klaskSvc.getPlayerTwo()],this.winner=null,this.loser=null}gameEndConfirmationAlert(){return s.a(this,void 0,void 0,(function*(){yield this.alertController.create({header:"".concat(this.winner," won!"),backdropDismiss:!1,subHeader:this.subHeaderDisplay(),message:"Final Score: 6 - ".concat(Math.min(this.playerOneScore,this.playerTwoScore)),buttons:[{text:"Confirm",handler:()=>{console.log("Sending data..."),console.log(this.buildCompleteGameObject()),this.sendCompletedGameData(),this.router.navigate(["/win-loss-stats",this.currentTourneyId])}},{text:"Deny",handler:()=>{console.log("Confirmation denied.")}}]}).then(l=>l.present())}))}buildCompleteGameObject(){return{tourneyId:this.currentTourneyId,tourneyName:"testing",gameNumber:this.gameNumber,winner:this.winner,loser:this.loser,points:this.scores}}sendCompletedGameData(){this.klaskSvc.saveNewGameResult("-1",this.buildCompleteGameObject())}subHeaderDisplay(){return this.forfeitted?"".concat(this.loser," has forfeitted."):null}forfeitActionSheet(){return s.a(this,void 0,void 0,(function*(){yield this.actionSheetController.create({header:"Who is forfeitting?",mode:"md",buttons:[{text:this.players[0],handler:()=>{this.forfeitGame(0)}},{text:this.players[1],handler:()=>{this.forfeitGame(1)}},{text:"Cancel",role:"cancel"}]}).then(l=>l.present())}))}forfeitGame(l){this.forfeitted=!0,this.isGameOver=!0,this.winner=0==l?this.players[l+1]:this.players[l-1],this.loser=this.players[l];for(let n=0==l?this.playerTwoScore:this.playerOneScore;n<6;n++)this.scores=[...this.scores,{pointDateTime:Date.now().toString(),scorer:this.winner,opponent:this.players[l],gamePointNumber:n+1,scorerPointNumber:0==l?this.playerOneScore+1:this.playerTwoScore+1,pointType:"forfeit"}];this.gameEndConfirmationAlert()}presentActionSheet(l){return s.a(this,void 0,void 0,(function*(){yield this.actionSheetController.create({mode:"md",buttons:[{text:"Goal",handler:()=>{this.addScoreAndUpdateGameData(l,"score")}},{text:"Klask Point",handler:()=>{this.addScoreAndUpdateGameData(l,"klask")}},{text:"Loss of Control Point",handler:()=>{this.addScoreAndUpdateGameData(l,"loss-control")}},{text:"Biscuit Point",handler:()=>{this.addScoreAndUpdateGameData(l,"biscuit")}},{text:"-1 (Correction)",handler:()=>{this.scores=this.scores.filter(n=>n.scorer!=(0==l?this.players[0]:this.players[1])||n.scorerPointNumber!=(0==l?this.playerOneScore:this.playerTwoScore)),console.log(this.scores)}},{text:"Cancel",role:"cancel"}]}).then(l=>l.present())}))}addScoreAndUpdateGameData(l,n){this.checkForWinner(l),this.scores=[...this.scores,{pointDateTime:Date.now().toString(),scorer:this.players[l],opponent:1==l?this.players[l-1]:this.players[l+1],gamePointNumber:this.scores.length+1,scorerPointNumber:0==l?this.playerOneScore+1:this.playerTwoScore+1,pointType:n}]}checkForWinner(l){this.isGameOver=6==(0==l?this.playerOneScore+1:this.playerTwoScore+1),this.isGameOver&&(this.winner=this.players[l],this.loser=this.players[0==l?l+1:l-1],this.gameEndConfirmationAlert())}doSwitch(){[this.players[0],this.players[1]]=[this.players[1],this.players[0]]}ngOnInit(){this.currentTourneyId=this.activatedRoute.snapshot.paramMap.get("tourneyId"),this.currentTourneyResults=this.klaskSvc.getTournamentGameResults(this.currentTourneyId),this.setGameNumber()}setGameNumber(){if(0==this.currentTourneyResults.length)this.gameNumber=1;else{let[l]=this.currentTourneyResults.slice(-1);this.gameNumber=l.gameNumber+1}}ionViewWillEnter(){this.scores=[]}get playerOneScore(){return this.scores.filter(l=>l.scorer==this.players[0]).length}get playerTwoScore(){return this.scores.filter(l=>l.scorer==this.players[1]).length}}var d=e("iInd"),b=t.ob({encapsulation:0,styles:[["ion-title[_ngcontent-%COMP%]{text-align:center}ion-card-header[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap}.player-name[_ngcontent-%COMP%]{font-size:2em;color:#fff}@media screen and (orientation:landscape){.flex-container[_ngcontent-%COMP%]{margin:0 auto;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row nowrap;align-content:center;-webkit-box-pack:center;justify-content:center;width:90%}ion-card[_ngcontent-%COMP%]{-webkit-box-flex:2;flex-grow:2;flex-basis:0}.middle-buttons[_ngcontent-%COMP%]{-webkit-box-flex:1;flex-grow:1;align-self:center;flex-basis:0}.scoreButton[_ngcontent-%COMP%]{height:calc((100vh - 125px - 12vw));font-size:calc((100vh - 125px - 25vw) * .68)}}@media screen and (orientation:portrait){.flex-container[_ngcontent-%COMP%]{margin:0 auto;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column nowrap;width:80%}ion-card[_ngcontent-%COMP%]{-webkit-box-flex:2;flex-grow:2}.middle-buttons[_ngcontent-%COMP%]{width:60%;align-self:center;flex-basis:0}.scoreButton[_ngcontent-%COMP%]{height:calc(100vh - 250px - 90vw);font-size:5em}}@media only screen and (min-device-width:768px) and (max-device-width:1024px) and (orientation:portrait){.scoreButton[_ngcontent-%COMP%]{height:calc(100vh - 125px - 84vw)}}@media only screen and (min-device-width:800px) and (max-device-width:1280px) and (orientation:portrait){.scoreButton[_ngcontent-%COMP%]{height:calc(100vh - 125px - 90vw)}}"]],data:{}});function p(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,2,"ion-title",[],null,null,null,r.O,r.t)),t.pb(1,49152,null,0,a.xb,[t.h,t.k,t.y],null,null),(l()(),t.Ib(2,0,["Game ",""]))],null,(function(l,n){l(n,2,0,n.component.gameNumber)}))}function m(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,2,"ion-title",[],null,null,null,r.O,r.t)),t.pb(1,49152,null,0,a.xb,[t.h,t.k,t.y],null,null),(l()(),t.Ib(-1,0,["G A M E O V E R !"]))],null,null)}function y(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,9,"ion-header",[],null,null,null,r.F,r.k)),t.pb(1,49152,null,0,a.B,[t.h,t.k,t.y],null,null),(l()(),t.qb(2,0,null,0,7,"ion-toolbar",[],null,null,null,r.P,r.u)),t.pb(3,49152,null,0,a.zb,[t.h,t.k,t.y],null,null),(l()(),t.qb(4,0,null,0,5,null,null,null,null,null,null,null)),t.pb(5,16384,null,0,u.m,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t.fb(16777216,null,null,1,null,p)),t.pb(7,278528,null,0,u.n,[t.N,t.K,u.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.fb(16777216,null,null,1,null,m)),t.pb(9,278528,null,0,u.n,[t.N,t.K,u.m],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t.qb(10,0,null,null,39,"ion-content",[],null,null,null,r.D,r.i)),t.pb(11,49152,null,0,a.u,[t.h,t.k,t.y],null,null),(l()(),t.qb(12,0,null,0,37,"div",[["class","flex-container"]],null,null,null,null,null)),(l()(),t.qb(13,0,null,null,12,"ion-card",[["id","playerOneSlot"]],null,null,null,r.C,r.e)),t.pb(14,49152,null,0,a.m,[t.h,t.k,t.y],null,null),(l()(),t.qb(15,0,null,0,2,"ion-card-header",[["class","ion-text-center player-name"]],null,null,null,r.A,r.g)),t.pb(16,49152,null,0,a.o,[t.h,t.k,t.y],null,null),(l()(),t.Ib(17,0,[" "," "])),(l()(),t.qb(18,0,null,0,7,"ion-card-content",[],null,null,null,r.z,r.f)),t.pb(19,49152,null,0,a.n,[t.h,t.k,t.y],null,null),(l()(),t.qb(20,0,null,0,5,"ion-button",[["class","ion-no-padding\n\t\t\t\t\t\t\t\t   scoreButton"],["color","dark"],["expand","block"],["id","player1"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.presentActionSheet(0)&&t),t}),r.x,r.c)),t.pb(21,49152,null,0,a.k,[t.h,t.k,t.y],{color:[0,"color"],expand:[1,"expand"]},null),(l()(),t.qb(22,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.Ib(23,null,[" "," "])),(l()(),t.qb(24,0,null,null,1,"h3",[["style","color: lightgray;"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" T A P "])),(l()(),t.qb(26,0,null,null,10,"div",[["class","middle-buttons"]],null,null,null,null,null)),(l()(),t.qb(27,0,null,null,4,"ion-button",[["color","warning"],["expand","block"],["fill","outline"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.doSwitch()&&t),t}),r.x,r.c)),t.pb(28,49152,null,0,a.k,[t.h,t.k,t.y],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(l()(),t.Ib(-1,0,[" SWAP SIDES\xa0"])),(l()(),t.qb(30,0,null,0,1,"ion-icon",[["name","repeat-outline"]],null,null,null,r.G,r.l)),t.pb(31,49152,null,0,a.C,[t.h,t.k,t.y],{name:[0,"name"]},null),(l()(),t.qb(32,0,null,null,4,"ion-button",[["class","ion-no-padding"],["color","danger"],["expand","block"],["fill","outline"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.forfeitActionSheet()&&t),t}),r.x,r.c)),t.pb(33,49152,null,0,a.k,[t.h,t.k,t.y],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(l()(),t.Ib(-1,0,[" FORFEIT\xa0"])),(l()(),t.qb(35,0,null,0,1,"ion-icon",[["name","sad-outline"]],null,null,null,r.G,r.l)),t.pb(36,49152,null,0,a.C,[t.h,t.k,t.y],{name:[0,"name"]},null),(l()(),t.qb(37,0,null,null,12,"ion-card",[["id","playerTwoSlot"]],null,null,null,r.C,r.e)),t.pb(38,49152,null,0,a.m,[t.h,t.k,t.y],null,null),(l()(),t.qb(39,0,null,0,2,"ion-card-header",[["class","ion-text-center player-name"]],null,null,null,r.A,r.g)),t.pb(40,49152,null,0,a.o,[t.h,t.k,t.y],null,null),(l()(),t.Ib(41,0,[" "," "])),(l()(),t.qb(42,0,null,0,7,"ion-card-content",[],null,null,null,r.z,r.f)),t.pb(43,49152,null,0,a.n,[t.h,t.k,t.y],null,null),(l()(),t.qb(44,0,null,0,5,"ion-button",[["class","ion-no-padding\n\t\t\t\t\t\t\t\t   scoreButton"],["color","dark"],["expand","block"],["fill","solid"],["id","player2"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.presentActionSheet(1)&&t),t}),r.x,r.c)),t.pb(45,49152,null,0,a.k,[t.h,t.k,t.y],{color:[0,"color"],expand:[1,"expand"],fill:[2,"fill"]},null),(l()(),t.qb(46,0,null,0,3,"div",[],null,null,null,null,null)),(l()(),t.Ib(47,null,[" "," "])),(l()(),t.qb(48,0,null,null,1,"h3",[["style","color: lightgray;"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,[" T A P "]))],(function(l,n){var e=n.component;l(n,5,0,!0),l(n,7,0,!e.isGameOver),l(n,9,0,e.isGameOver),l(n,21,0,"dark","block"),l(n,28,0,"warning","block","outline"),l(n,31,0,"repeat-outline"),l(n,33,0,"danger","block","outline"),l(n,36,0,"sad-outline"),l(n,45,0,"dark","block","solid")}),(function(l,n){var e=n.component;l(n,17,0,e.players[0]),l(n,23,0,e.playerOneScore),l(n,41,0,e.players[1]),l(n,47,0,e.playerTwoScore)}))}var f=t.mb("app-game-scoring",h,(function(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,1,"app-game-scoring",[],null,null,null,y,b)),t.pb(1,114688,null,0,h,[a.a,a.b,d.m,d.a,c.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),g=e("s7LF");class k{}e.d(n,"GameScoringPageModuleNgFactory",(function(){return w}));var w=t.nb(o,[],(function(l){return t.zb([t.Ab(512,t.j,t.Y,[[8,[i.a,f]],[3,t.j],t.w]),t.Ab(4608,u.l,u.k,[t.t,[2,u.A]]),t.Ab(4608,g.k,g.k,[]),t.Ab(4608,a.c,a.c,[t.y,t.g]),t.Ab(4608,a.Db,a.Db,[a.c,t.j,t.q]),t.Ab(4608,a.Gb,a.Gb,[a.c,t.j,t.q]),t.Ab(1073742336,u.b,u.b,[]),t.Ab(1073742336,g.j,g.j,[]),t.Ab(1073742336,g.c,g.c,[]),t.Ab(1073742336,a.Bb,a.Bb,[]),t.Ab(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),t.Ab(1073742336,k,k,[]),t.Ab(1073742336,o,o,[]),t.Ab(1024,d.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);